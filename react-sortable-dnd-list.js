!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],t):(e=e||self).SortableList=t(e.React,e.PropTypes)}(this,function(e,t){"use strict";var n="default"in e?e.default:e;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(t){var a=t.value,s=t.onChange,d=t.component,p=t.itemComponent,m=t.itemComponentProps,v=t.dragHandleDataAttribute,g=t.animationDuration,h=t.animationEasing,y=o(t,["value","onChange","component","itemComponent","itemComponentProps","dragHandleDataAttribute","animationDuration","animationEasing"]),b=e.useRef(),w=i(e.useState(),2),E=w[0],C=w[1],R=i(e.useState(),2),P=R[0],S=R[1],O=e.useRef(),k=e.useRef(),x=e.useRef(),L=e.useRef(),T=e.useRef(),Y=e.useRef();a!==Y.current&&(Y.current=a,T.current=a.map(function(e,t){return t})),e.useEffect(function(){var e=function(){};return window.addEventListener("touchmove",e),function(){window.removeEventListener("touchmove",e)}},[]);var A=e.useCallback(function(e,t,n){if(!E&&1!==a.length){var r=function(e,t,n){var r,i;for(;t;){if(t===e){if(n&&!r)return;if(i)for(var o=0;o<t.childNodes.length;){if(t.childNodes[o]===i)return[i,o];o++}break}if(f.indexOf(t.tagName.toLowerCase())>=0)return;t.dataset[n]&&(r=t),i=t,t=t.parentElement}}(b.current,e,v);if(r){var o=i(r,2),u=o[0],c=o[1];C({touch:n,initialPosition:c,itemHeights:Array.prototype.map.call(b.current.childNodes,function(e){return e.getBoundingClientRect().height}),itemSpacing:b.current.childNodes[1].getBoundingClientRect().top-b.current.childNodes[0].getBoundingClientRect().bottom,itemTopOffset:u.getBoundingClientRect().top-b.current.childNodes[0].getBoundingClientRect().top,dragStartY:t}),x.current={previous:c,new:c,shiftY:0},L.current=a.map(function(e){return 0})}}},[E]),N=e.useCallback(function(e){0===e.button&&A(e.target,e.pageY)},[A]),j=e.useCallback(function(e){if(!(e.touches.length>1)){var t=e.changedTouches[0];A(e.target,t.pageY,t.identifier)}},[A]),q=e.useCallback(function(e){if(E){var t;if(void 0!==E.touch){var n=e.changedTouches,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var u=o;if(u.identifier===E.touch){t=u.pageY;break}}}else t=e.pageY;if(void 0!==t){e.preventDefault();var c=t-E.dragStartY,s=E.itemTopOffset+c,f=function(e,t,n,r){var i=n+e[r]/2+t/2,o=0,a=0;for(;a<e.length;){if(o+=e[a]+t,i<=o)return a;a++}return e.length-1}(E.itemHeights,E.itemSpacing,s,E.initialPosition),d=E.itemHeights[E.initialPosition];L.current=a.map(function(e,t){return t<E.initialPosition?t>=f?d+E.itemSpacing:0:t>E.initialPosition?t<=f?-1*(d+E.itemSpacing):0:c});for(var p=0;p<a.length;)b.current.childNodes[p].style.transform="translateY(".concat(L.current[p],"px)"),p++;x.current={previous:E.initialPosition,new:f,shiftY:l(E.itemHeights,E.itemSpacing,E.initialPosition,f)-l(E.itemHeights,E.itemSpacing,E.initialPosition,E.initialPosition)}}}},[E]),D=e.useCallback(function(){C(),S(!0);var e=function(e,t,n){if(n<t)return e.slice(0,n).concat(e[t]).concat(e.slice(n,t)).concat(e.slice(t+1));if(n>t)return e.slice(0,t).concat(e.slice(t+1,n+1)).concat(e[t]).concat(e.slice(n+1));return e.slice()}(T.current,x.current.previous,x.current.new);setTimeout(function(){S(!1),T.current=e,s(e.map(function(e){return a[e]}))},g)},[T.current]),H=e.useCallback(function(e){1===e.which&&D()},[D]),B=e.useCallback(function(e){var t=e.changedTouches,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}if(i.identifier===O.current)return void D()}},[D]);return e.useEffect(function(){E?(k.current=q,void 0!==E.touch?(O.current=E.touch,window.addEventListener("touchmove",k.current,{passive:!1}),window.addEventListener("touchend",B)):(window.addEventListener("mousemove",k.current,{passive:!1}),window.addEventListener("mouseup",H))):(void 0!==O.current?(O.current=void 0,window.removeEventListener("touchmove",k.current,{passive:!1}),window.removeEventListener("touchend",B)):(window.removeEventListener("mousemove",k.current,{passive:!1}),window.removeEventListener("mouseup",H)),k.current=void 0)},[E]),e.useEffect(function(){P&&(b.current.childNodes[x.current.previous].style.transform="translateY(".concat(x.current.shiftY,"px)"))},[P]),n.createElement(d,r({},y,{ref:b,onTouchStart:j,onMouseDown:N}),T.current.map(function(e,t){return n.createElement(p,r({},m,{key:e,dragging:!!E,dragged:E&&t===x.current.previous,style:E||P?c(t===x.current.previous,P,L.current[t],g,h):u}),a[e])}))}t=t&&t.hasOwnProperty("default")?t.default:t,a.propTypes={value:t.arrayOf(t.any).isRequired,onChange:t.func.isRequired,component:t.elementType.isRequired,itemComponent:t.elementType.isRequired,itemComponentProps:t.object,animationDuration:t.number.isRequired,animationEasing:t.string.isRequired};var u={transform:"none"};function c(e,t,n,r,i){var o={position:"relative",transition:"all ".concat(r,"ms ").concat(i)};return e?(o.zIndex=1,t||(o.transition=void 0)):o.transform="translateY(".concat(n,"px)"),o}var s=n.forwardRef(function(e,t){var i=e.children,a=o(e,["children"]);return n.createElement("div",r({ref:t},a),i)});a.defaultProps={component:s,animationDuration:200,animationEasing:"ease-out"};var f=["a","button","input","textarea","select"];function l(e,t,n,r){for(var i=0,o=0;o<r;)o===n?r++:i+=e[o]+t,o++;return i}return a});
//# sourceMappingURL=react-sortable-dnd-list.js.map
